AC_REVISION($Revision$)
AC_INIT(dom/dom.ads)

## Also change version number in docs/xml.texi
XMLADA_MAJOR_VERSION=3
XMLADA_MINOR_VERSION=0w

AC_CANONICAL_SYSTEM
AC_PROG_CC
AC_PROG_RANLIB
AC_CHECK_PROGS(DVIPS, dvips, "")
AC_CHECK_PROGS(MAKEINFO, makeinfo, "")
AC_CHECK_PROGS(TEXI2DVI, texi2dvi, "")
AC_CHECK_PROGS(PDFTEX, pdftex, "")
AC_CHECK_PROGS(TEX, tex, "")

AC_ARG_ENABLE(shared, [  --disable-shared        build only static library],
  enable_shared=$enableval, enable_shared=yes)
if test "$enable_shared" = "yes"; then
   LIBRARY_TYPE=relocatable
else
   LIBRARY_TYPE=static
fi
AC_SUBST(LIBRARY_TYPE)

IFS=' '

# Defaults
CP="cp -p -f"
LN="ln -s -f"
MKDIR="mkdir -p"

# Overrides
case "${host_os}" in
  lynxos*)
    CP="cp -p"
    MKDIR="mkdir -p -f"
    ;;

  cygwin*|mingw32*)
    LN="cp -p -f"
    ;;
esac

AC_SUBST(CP)
AC_SUBST(LN)
AC_SUBST(MKDIR)

AC_SUBST(CC)
AC_SUBST(RANLIB)
AC_SUBST(XMLADA_MAJOR_VERSION)
AC_SUBST(XMLADA_MINOR_VERSION)

AC_OUTPUT(shared.gpr Makefile Makefile.314 dom/test/default.gpr docs/Makefile xmlada-config)
